!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("d3-force")):"function"==typeof define&&define.amd?define(["d3-force"],e):"object"==typeof exports?exports.cytoscapeD3Force=e(require("d3-force")):t.cytoscapeD3Force=e(t["d3-force"])}(this,function(t){return function(t){function e(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(2),o=n(4),s=n(1),u=function(){function t(e){i(this,t);var n=this.options=s({},r,e);this.state=s({},n,{layout:this,nodes:n.eles.nodes(),edges:n.eles.edges(),progress:0,iterations:0,startTime:0}),this.simulation=null,this.removeCytoscapeEvents=null,this.destroyedEvent=null}return a(t,[{key:"makeBoundingBox",value:function(t,e){return t=null==t?{x1:0,y1:0,w:e.width(),h:e.height()}:{x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2,w:t.w,h:t.h},null==t.x2&&(t.x2=t.x1+t.w),null==t.w&&(t.w=t.x2-t.x1),null==t.y2&&(t.y2=t.y1+t.h),null==t.h&&(t.h=t.y2-t.y1),t}},{key:"setInitialPositionState",value:function(t,e){var n=t.position(),i=e.currentBoundingBox,a=t.scratch(e.name);null==a&&(a={},t.scratch(e.name,a)),s(a,e.randomize?{x:i.x1+Math.round(Math.random()*i.w),y:i.y1+Math.round(Math.random()*i.h)}:{x:n.x,y:n.y}),t.locked()&&s(a,{fx:n.x,fy:n.y})}},{key:"refreshPositions",value:function(t,e,n){t.positions(function(t){var n=t.scratch(e.name);return{x:n.x,y:n.y}}),n&&e.cy.fit(e.padding)}},{key:"getScratch",value:function(t){var e=this.state.name,n=t.scratch(e);return n||(n={},t.scratch(e,n)),n}},{key:"ungrabify",value:function(t){var e=this;this.state.ungrabifyWhileSimulating&&(t.filter(function(t){return e.getScratch(t).grabbable=t.grabbable()}),t.ungrabify())}},{key:"regrabify",value:function(t){var e=this;this.state.ungrabifyWhileSimulating&&(t.filter(function(t){return e.getScratch(t).grabbable}),t.grabify())}},{key:"tick",value:function(){var t=this.state;t.progress+=1/Math.ceil(Math.log(this.simulation.alphaMin())/Math.log(1-this.simulation.alphaDecay())),t.iterations++;var e=t.maxIterations&&!t.infinite?t.iterations/t.maxIterations:0,n=Date.now()-t.startTime,i=t.maxSimulationTime&&!t.infinite?n/t.maxSimulationTime:0,a=Math.max(e,i,t.progress);if((a=a>1?1:a)>=1)return void this.end(!t.infinite);t.tick&&t.tick(a),t.animate&&this.refreshPositions(t.nodes,t,t.fit)}},{key:"end",value:function(t){var e=this.state;this.refreshPositions(e.nodes,e,e.fit),this.emit("layoutstop",e.cy),this.reset(t)}},{key:"reset",value:function(t){this.simulation&&this.simulation.stop();var e=this.state;return this.destroyedEvent&&this.destroyedEvent(),(t||!e.infinite)&&this.removeCytoscapeEvents&&this.removeCytoscapeEvents(),e.animate&&this.regrabify(e.nodes),this}},{key:"run",value:function(){var t=this;this.reset();var e=this,n=this.state,i=!1;if(n.currentBoundingBox=this.makeBoundingBox(n.boundingBox,n.cy),n.ready&&e.one("layoutready",n.ready),n.stop&&e.one("layoutstop",n.stop),n.nodes.forEach(function(e){return t.setInitialPositionState(e,n)}),i||(i=!0,e.emit("layoutready")),!e.simulation){var a=n.nodes.map(function(t){return s(e.getScratch(t),t.data())}),r=n.edges.map(function(t){return s({},t.data())});e.simulation=o.forceSimulation(a),n.alpha&&e.simulation.alpha(n.alpha),n.alphaMin&&e.simulation.alphaMin(n.alphaMin),n.alphaDecay&&e.simulation.alphaDecay(n.alphaDecay),n.alphaTarget&&e.simulation.alphaTarget(n.alphaTarget),n.velocityDecay&&e.simulation.velocityDecay(n.velocityDecay);var u=o.forceCollide();n.collideRadius&&u.radius(n.collideRadius),n.collideStrength&&u.strength(n.collideStrength),n.collideIterations&&u.iterations(n.collideIterations);var c=o.forceLink(r);n.linkId&&c.id(n.linkId),n.linkDistance&&c.distance(n.linkDistance),n.linkStrength&&c.strength(n.linkStrength),n.linkIterations&&c.iterations(n.linkIterations);var l=o.forceManyBody();n.manyBodyStrength&&l.strength(n.manyBodyStrength),n.manyBodyTheta&&l.theta(n.manyBodyTheta),n.manyBodyDistanceMin&&l.distanceMin(n.manyBodyDistanceMin),n.manyBodyDistanceMax&&l.distanceMax(n.manyBodyDistanceMax);var d=o.forceX();n.xX&&d.x(n.xX),n.xStrength&&d.strength(n.xStrength);var y=o.forceY();n.yY&&y.y(n.yY),n.yStrength&&y.strength(n.yStrength);var f=null;(n.radialRadius||n.radialStrength||n.radialX||n.radialY)&&(f=o.forceRadial(),n.radialRadius&&f.radius(n.radialRadius),n.radialStrength&&f.strength(n.radialStrength),n.radialX&&f.x(n.radialX),n.radialY&&f.y(n.radialY));var h=o.forceCenter(n.currentBoundingBox.w/2,n.currentBoundingBox.h/2);e.simulation.force("collide",u).force("link",c).force("many-body",l).force("x",d).force("y",y).force("center",h),f&&e.simulation.force("radius",f),e.simulation.on("tick",function(){e.tick()}).on("end",function(){e.end()})}if(!e.destroyedEvent){var g=void 0;n.cy.one("destroy",g=function(){e.stop()}),e.destroyedEvent=function(){n.cy.off("destroy",g),e.destroyedEvent=null}}if(e.prerun(n),e.emit("layoutstart"),n.progress=0,n.iterations=0,n.startTime=Date.now(),n.animate){var v=Math.abs((n.alpha||1)-(n.alphaTarget||0))/3;if(!e.removeCytoscapeEvents){var p=function(t){var i=this,a=i.position();if(t.cyTarget===i||t.target===i){var r=e.getScratch(i);n.progress=0,n.iterations=0,n.startTime=Date.now(),r.x=a.x,r.y=a.y,r.dragCounter=(r.dragCounter?r.dragCounter:0)+1,"drag"===t.type&&1===r.dragCounter?e.simulation.alphaTarget(v).restart():"free"===t.type&&r.dragCounter>5?r.dragCounter=0:("unlock"===t.type||"free"===t.type)&&r.dragCounter>1?(n.fixedAfterDragging?(r.fx=a.x,r.fy=a.y):(delete r.fx,delete r.fy),e.simulation.alphaTarget(v).restart()):"free"===t.type&&1===r.dragCounter?r.dragCounter=0:(r.fx=a.x,r.fy=a.y)}};e.removeCytoscapeEvents=function(){n.nodes.off("grab free drag lock unlock",p),e.removeCytoscapeEvents=null},n.nodes.on("grab free drag lock unlock",p)}e.ungrabify(n.nodes)}return e.postrun(n),this}},{key:"prerun",value:function(){}},{key:"postrun",value:function(){}},{key:"stop",value:function(){return this.reset(!0)}}]),t}();t.exports=u},function(t,e,n){"use strict";t.exports=null!=Object.assign?Object.assign.bind(Object):function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n.forEach(function(e){Object.keys(e).forEach(function(n){return t[n]=e[n]})}),t}},function(t,e,n){"use strict";t.exports=Object.freeze({animate:!0,maxIterations:0,maxSimulationTime:0,ungrabifyWhileSimulating:!1,fixedAfterDragging:!1,fit:!1,padding:30,boundingBox:void 0,alpha:void 0,alphaMin:void 0,alphaDecay:void 0,alphaTarget:void 0,velocityDecay:void 0,collideRadius:void 0,collideStrength:void 0,collideIterations:void 0,linkId:void 0,linkDistance:30,linkStrength:void 0,linkIterations:void 0,manyBodyStrength:void 0,manyBodyTheta:void 0,manyBodyDistanceMin:void 0,manyBodyDistanceMax:void 0,xStrength:void 0,xX:void 0,yStrength:void 0,yY:void 0,radialStrength:void 0,radialRadius:void 0,radialX:void 0,radialY:void 0,ready:function(){},stop:function(){},tick:function(){},randomize:!1,infinite:!1})},function(t,e,n){"use strict";var i=n(0),a=function(t){t&&t("layout","d3-force",i)};"undefined"!=typeof cytoscape&&a(cytoscape),t.exports=a},function(e,n){e.exports=t}])});